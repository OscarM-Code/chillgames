{"remainingRequest":"/home/oscar/projets-CDA/chillgames-vue/node_modules/babel-loader/lib/index.js!/home/oscar/projets-CDA/chillgames-vue/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/oscar/projets-CDA/chillgames-vue/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/oscar/projets-CDA/chillgames-vue/src/views/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/oscar/projets-CDA/chillgames-vue/src/views/Login.vue","mtime":1652274892820},{"path":"/home/oscar/projets-CDA/chillgames-vue/babel.config.js","mtime":1650030303150},{"path":"/home/oscar/projets-CDA/chillgames-vue/node_modules/cache-loader/dist/cjs.js","mtime":1650030295349},{"path":"/home/oscar/projets-CDA/chillgames-vue/node_modules/babel-loader/lib/index.js","mtime":1650030295749},{"path":"/home/oscar/projets-CDA/chillgames-vue/node_modules/cache-loader/dist/cjs.js","mtime":1650030295349},{"path":"/home/oscar/projets-CDA/chillgames-vue/node_modules/vue-loader-v16/dist/index.js","mtime":1650030295741}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCBGb290ZXIgZnJvbSAiLi4vY29tcG9uZW50cy9Gb290ZXIudnVlIjsKaW1wb3J0IHsgY3JlYXRlVG9hc3QgfSBmcm9tICJtb3NoYS12dWUtdG9hc3RpZnkiOwppbXBvcnQgVnVlSnd0RGVjb2RlIGZyb20gJ3Z1ZS1qd3QtZGVjb2RlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdsb2dpbicsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1haWw6IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCkuZ2V0KCJlbWFpbCIpIHx8IG51bGwsCiAgICAgIHBhc3N3b3JkOiBudWxsCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgRm9vdGVyOiBGb290ZXIKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLm1haWwgJiYgdGhpcy5wYXNzd29yZCkgewogICAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3VzZXJzJywgewogICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicKICAgICAgICAgIH0sCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgIG1haWw6IHRoaXMubWFpbCwKICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgICAgIH0pCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocikgewogICAgICAgICAgY29uc29sZS5sb2cocik7CgogICAgICAgICAgaWYgKHIuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdmFyIHVzZXJuYW1lID0gVnVlSnd0RGVjb2RlLmRlY29kZShyLnRva2VuKS51c2VyOwoKICAgICAgICAgICAgX3RoaXMudG9hc3QoIldlbGNvbWUgIi5jb25jYXQodXNlcm5hbWUpLCAnc3VjY2VzcycpOwoKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgci50b2tlbik7CgogICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLnRvYXN0KHIubWVzc2FnZSwgJ2RhbmdlcicpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CgogICAgICAgICAgX3RoaXMudG9hc3QoIlNvbWV0aGluZyB3ZW50IHdyb25nIiwgJ2RhbmdlcicpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudG9hc3QoIlBsZWFzZSBmaWxsIGFsbCB0aGUgZmllbGRzLiIsICJkYW5nZXIiKTsKICAgICAgfQogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHRvYXN0ID0gZnVuY3Rpb24gdG9hc3QobWVzc2FnZSwgdHlwZSkgewogICAgICBjcmVhdGVUb2FzdChtZXNzYWdlLCB7CiAgICAgICAgcG9zaXRpb246ICJ0b3AtcmlnaHQiLAogICAgICAgIHRpbWVvdXQ6IDUwMDAsCiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICBzaG93SWNvbjogdHJ1ZQogICAgICB9KTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgdG9hc3Q6IHRvYXN0CiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;;;;;;AAkBA,OAAOA,MAAP,MAAmB,0BAAnB;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,eAAe;AACXC,MAAI,EAAE,OADK;AAEXC,MAFW,kBAEJ;AACH,WAAO;AACHC,UAAI,EAAE,IAAIC,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,EAA4CC,GAA5C,CAAgD,OAAhD,KAA4D,IAD/D;AAEHC,cAAQ,EAAE;AAFP,KAAP;AAIH,GAPU;AAQXC,YAAU,EAAE;AACRZ,UAAK,EAALA;AADQ,GARD;AAWXa,SAAO,EAAE;AACLC,SADK,mBACG;AAAA;;AACJ,UAAI,KAAKT,IAAL,IAAa,KAAKM,QAAtB,EAAgC;AAC5BI,aAAK,CAAC,iCAAD,EAAoC;AACrCC,gBAAM,EAAE,MAD6B;AAErCC,iBAAO,EAAE;AACL,4BAAgB,kBADX;AAEL,2CAA+B;AAF1B,WAF4B;AAMrCC,cAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBf,gBAAI,EAAE,KAAKA,IADM;AAEjBM,oBAAQ,EAAE,KAAKA;AAFE,WAAf;AAN+B,SAApC,CAAL,CAWCU,IAXD,CAWM,kBAAO;AAAA,iBAAKC,QAAQ,CAACC,IAAT,EAAL;AAAA,SAXb,EAYCF,IAZD,CAYM,aAAK;AACPG,iBAAO,CAACC,GAAR,CAAYC,CAAZ;;AACA,cAAIA,CAAC,CAACC,MAAF,KAAa,GAAjB,EAAsB;AAClB,gBAAIC,QAAO,GAAI1B,YAAY,CAAC2B,MAAb,CAAoBH,CAAC,CAACI,KAAtB,EAA6BC,IAA5C;;AACA,iBAAI,CAACC,KAAL,mBAAsBJ,QAAtB,GAAkC,SAAlC;;AACAK,wBAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BR,CAAC,CAACI,KAAhC;;AACA,iBAAI,CAACK,OAAL,CAAaC,IAAb;AACJ,WALA,MAKO;AACH,iBAAI,CAACJ,KAAL,CAAWN,CAAC,CAACW,OAAb,EAAsB,QAAtB;AACJ;AACH,SAtBD,EAuBCC,KAvBD,CAuBO,aAAE,EAAK;AACVd,iBAAO,CAACC,GAAR,CAAYc,GAAZ;;AACA,eAAI,CAACP,KAAL,CAAW,sBAAX,EAAmC,QAAnC;AACH,SA1BD;AA2BH,OA5BD,MA4BM;AACF,aAAKA,KAAL,CAAW,6BAAX,EAA0C,QAA1C;AACJ;AACJ;AAjCK,GAXE;AA8CXQ,OA9CW,mBA8CH;AACR,QAAMR,KAAI,GAAI,SAARA,KAAQ,CAACK,OAAD,EAAUI,IAAV,EAAmB;AAC/BxC,iBAAW,CAACoC,OAAD,EAAU;AACnBK,gBAAQ,EAAE,WADS;AAEnBC,eAAO,EAAE,IAFU;AAGnBF,YAAI,EAAEA,IAHa;AAInBG,gBAAQ,EAAE;AAJS,OAAV,CAAX;AAMD,KAPD;;AAQA,WAAO;AAAEZ,WAAI,EAAJA;AAAF,KAAP;AACD;AAxDY,CAAf","names":["Footer","createToast","VueJwtDecode","name","data","mail","URLSearchParams","window","location","search","get","password","components","methods","login","fetch","method","headers","body","JSON","stringify","then","response","json","console","log","r","status","username","decode","token","user","toast","localStorage","setItem","$router","push","message","catch","err","setup","type","position","timeout","showIcon"],"sourceRoot":"","sources":["/home/oscar/projets-CDA/chillgames-vue/src/views/Login.vue"],"sourcesContent":["<template>\n    <div id=\"login\">\n        <div id=\"form\">\n            <p class=\"goHome\" @click=\"this.$router.push('/')\">Go back Home</p>\n            <h1>Information de connection</h1>\n            <form @submit.prevent=\"login\">\n                <label for=\"email\">Email</label>\n                <input type=\"email\" id=\"email\" placeholder=\"Entrer votre Email ici.\" v-model=\"mail\">\n                <label for=\"password\">Mot de passe</label>\n                <input type=\"password\" id=\"password\" placeholder=\"Mot de passe\" v-model=\"password\">\n                <button>Login</button>\n            </form>\n            <p>Ou cr√©er un compte: <a @click=\"this.$router.push('/register')\">S'enregistrer</a></p>\n        </div>\n    </div>\n    <Footer></Footer>\n</template>\n<script>\nimport Footer from \"../components/Footer.vue\"\nimport { createToast } from \"mosha-vue-toastify\";\nimport VueJwtDecode from 'vue-jwt-decode'\n\nexport default {\n    name: 'login',\n    data() {\n        return {\n            mail: new URLSearchParams(window.location.search).get(\"email\") || null,\n            password: null,\n        }\n    },\n    components: {\n        Footer\n    },\n    methods: {\n        login() {\n            if (this.mail && this.password) {\n                fetch('http://localhost:3000/api/users', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Access-Control-Allow-Origin': '*'\n                    },\n                    body: JSON.stringify({\n                        mail: this.mail,\n                        password: this.password\n                    })\n                })\n                .then(response => response.json())\n                .then(r => {\n                    console.log(r);\n                    if (r.status === 200) {\n                        let username = VueJwtDecode.decode(r.token).user;\n                        this.toast(`Welcome ${username}`, 'success');\n                        localStorage.setItem(\"token\", r.token);\n                        this.$router.push(`/`);\n                    } else {\n                        this.toast(r.message, 'danger');\n                    }\n                })\n                .catch(err => {\n                    console.log(err);\n                    this.toast(\"Something went wrong\", 'danger');\n                });\n            }else {\n                this.toast(\"Please fill all the fields.\", \"danger\");\n            }\n        }\n    },\n    setup() {\n    const toast = (message, type) => {\n      createToast(message, {\n        position: \"top-right\",\n        timeout: 5000,\n        type: type,\n        showIcon: true,\n      });\n    };\n    return { toast };\n  },\n}\n</script>\n<style scoped>\n#login {\n    height: 100vh;\n    background-image: url(\"../assets/img/bg-login.jpg\");\n    background-size: cover;\n    background-position: right;\n    display: flex;\n    justify-content: flex-end;\n}\n#login #form\n{\n    height: 100%;\n    width: 30%;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n    background: #ffffff;\n}\n#login #form > form\n{\n    margin-top: 5rem;\n    width: 70%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n}\n#login #form h1\n{\n    margin-top: 5rem;\n    font-size: 2.5rem;\n    color: #000000;\n    text-shadow: none;\n    text-align: center;\n}\n#login #form > form > label\n{\n    font-size: 1.5em;\n    font-weight: bold;\n    color: #000000;\n    text-shadow: none;\n    margin-top: 1rem;\n}\n#login #form > form > input\n{\n    width: 100%;\n    height: 3rem;\n    border: none;\n    border-bottom: 2px solid #000000;\n    margin-bottom: 2rem;\n    font-size: 1.5rem;\n}\n#login #form > form > input:focus\n{\n    outline: none;\n}\n#login #form > form > button\n{\n    width: 100%;\n    height: 4rem;\n    border: none;\n    border-radius: 5px;\n    background: #000000;\n    color: #ffffff;\n    font-size: 1.5rem;\n    font-weight: bold;\n    cursor: pointer;\n    transition: 0.3s;\n}\n#login #form > form > button:hover\n{\n    transform: scale(1.1);\n}\n#form > p\n{\n    font-size: 1.2rem;\n    color: #000000;\n    text-shadow: none;\n    margin-top: 1rem;\n}\n#form > p > a\n{\n    color: #461e61;\n    text-decoration: underline;\n    cursor: pointer;\n}\n\n.goHome\n{\n    cursor: pointer;\n    color: #758edf !important;\n    align-self: flex-end;\n    margin-top: 1rem;\n    margin-right: 1rem;\n    font-weight: bold;\n}\n\n@media only screen and (max-width : 420px) and (orientation: portrait) {\n    #login #form\n    {\n        width: 100%;\n    }\n    #login #form > form\n    {\n        margin-top: 1rem;\n    }\n    #login #form h1\n    {\n        margin-top: 4rem;\n    }\n}\n@media only screen and (max-width : 900px) and (orientation: landscape) {\n    #login #form\n    {\n        width: 70%;\n    }\n    #login #form > form\n    {\n        margin-top: 1rem;\n    }\n    #login #form h1\n    {\n        margin-top: 4rem;\n    }\n    #login {\n    background-size: 100% auto;\n    height: auto;\n    width: 100%;\n    }\n}\n@media (min-width: 768px) and (max-device-width: 1024px) and (orientation: portrait) {\n    #login #form\n    {\n        width: 70%;\n    }\n    #login {\n    background-size: cover;\n    background-position: left 45% bottom;\n    }\n}\n@media (width: 1024px) and (orientation: landscape) {\n    #login #form\n    {\n        width: 50%;\n    }\n    #login #form > form\n    {\n        margin-top: 1rem;\n    }\n    #login #form h1\n    {\n        margin-top: 4rem;\n    }\n}\n</style>"]}]}